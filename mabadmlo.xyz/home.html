<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="style.css">
		<title>Home</title>
    <link rel="icon" href='https://icons.iconarchive.com/icons/graphicloads/100-flat-2/128/contacts-icon.png'>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="somejs.js"></script>
    <script type="text/javascript" src="populateTable.js"></script>
    <script type="text/javascript" src="search.js"></script>
    <script type="text/javascript" src="addcontact.js"></script>
    <script type="text/javascript" src="deleteContact.js"></script>
    <script type="text/javascript" src="editContact.js"></script>
    <script type="text/javascript" src="bakery.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	</head>
  <body onload="var userId = getCookie('userId');validateUserId(userId);populateTableForUser(userId);hideUser();hideBlur();">
    <div class="blurContainer" id="blurContainer"></div>
    <div id="sidebar" class="sidebar">
      <a class="closebtn" onclick="closeNav()">&times;</a>
      <a href="login.html">Logout</a>
      <p><b>How To Use</b><br>Your contacts are displayed in the table. To add new contacts, click the add button and enter their information. To update or delete a contact, click on their contact and make the appropriate selection.</p>
    </div>
    <button class="openbtn" onclick="openNav()">&#9776;</button>
    <div class="container">
          <div class="form-container" style="margin:0 auto; padding:25px;position:absolute">

            <div class="form" id="add-form" style="display:none;">
                <form method="POST" action="javascript:;" id="add-form">
                  <a class="closebtn" onclick="hideForm('add-form');hideBlur();">&times;</a>
                    <h1>Add Contact</h1>
                    <div>
                        <input type="text" id="firstname" placeholder="First name">
                    </div>
                    <div>
                        <input type="text" id="lastname" placeholder="Last name">
                    </div>
                    <div>
                        <input type="text" id="phoneNumber" placeholder="Phone" oninput="formatPhoneNumber(this);">
                    </div>
                    <div>
                        <input type="text" id="email" placeholder="Email">
                    </div>
                        <input onclick="add_contact();hideForm('add-form');hideBlur();"type="submit" href=""  value="Submit">
                    </br>
                </form>
              </div> <!--FORM-->

              <div class="form" id="update-form" style="display:none;">
                <form method="POST" action="javascript:;" id="update-form">
                  <a class="closebtn" onclick="hideForm('update-form');hideBlur();">&times;</a>
                    <h1>Update Contact</h1>
                    <div>
                        <input type="text" id="upd_firstname" placeholder="First name">
                    </div>
                    <div>
                        <input type="text" id="upd_lastname" placeholder="Last name">
                    </div>
                    <div>
                        <input type="text" id="upd_phoneNumber" placeholder="Phone">
                    </div>
                    <div>
                        <input type="text" id="upd_email" placeholder="Email">
                    </div>
                        <input onclick="editContact(getCookie('contactid'));hideForm('update-form');hideForm('userCard');hideBlur();"type="submit" href=""  value="Submit">
                    </br>
                </form>
              </div> <!--FORM-->

        </div> <!--FORM-Container-->
        
            <h1 id="header">Your Contacts</h1>
            <button onclick="showForm('add-form');showBlur();" class ='button' style='display:inline-block;font-size:15px;' id="add-button">Add</button>
            <input id="search-input" oninput="searchContacts();"class ='search' style='display:inline-block;font-size:15px;'type="text" placeholder="Search"></input> <!--Phone number needs to be in (123)-123-1234 format before getting send as request-->
            <button id="cardDelButton" onclick="deleteRow(getCookie('contactid'))" class ='cardButton' style='color:red;display:none;font-size:15px;'>Delete</button>
            <button id="cardUpdButton" onclick="showForm('update-form');showBlur();" class ='cardButton' style='display:none;font-size:15px;'>Update</button>
            <div class="userCard" id="userCard" style="display:none;text-align: center;"></div>
  
            <table class="table" style="position:relative; max-width:75%;" id="contacts-table">
                <tr>
                  <th>First</th>
                  <th>Last</th>
                  <th>Phone</th>
                  <th>Email</th>
                </tr>
                <tbody id="contactsTableBody"></tbody>
              </table>
              <button onclick="window.location.href='login.html';deleteCookies();" class ='button'>Logout</button>
        </div>
        <script>
          function formatPhoneNumber(input) {
              const phoneNumber = input.value.replace(/\D/g, '');
              if (phoneNumber.length === 0 || phoneNumber.length > 10) {
                  input.value = '';
              } else {
                  input.value = '(' + phoneNumber.slice(0, 3) + ')-' + phoneNumber.slice(3, 6) + '-' + phoneNumber.slice(6, 10);
              }
          }
      </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
	</body>
</html>
